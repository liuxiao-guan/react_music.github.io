{"ast":null,"code":"import _slicedToArray from\"D:/vscode/react_netease_music/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";//import {search} from \"../utils/search\";\nimport{comment}from\"../utils/comment\";import{Avatar,Button,List}from\"antd\";import{LikeOutlined,CommentOutlined}from\"@ant-design/icons/lib/icons\";import{Footer}from\"antd/lib/layout/layout\";//封装歌曲结果对象\n/*\r\n* 不得不吐槽一下Typescript要求真多，这些参数是通过报错信息找到的，\r\n* 如果想看，可以在下面渲染的时候，在map中把value的类型去掉，并在li的渲染中直接渲染value，react会在报错信息中提示\r\n* 还不太清楚各个参数具体的类型，所以暂时都使用any\r\n* */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var counter=0;//第二版搜索结果\nexport default function Comment(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inputPageNum=_useState2[0],setInputPageNum=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),songid=_useState4[0],setSongid=_useState4[1];var _useState5=useState({// 类型\n//type: '1',\n// 页容量\nlimit:15,// 页码\npage:1,// 总条数\ntotal:0,commentlist:[{user:{nickname:'',avatarUrl:''},beReplied:null,artists:[],pendantData:null,showFloorComment:null,status:null,commentId:null,content:null,contentResource:null,time:'',timeStr:null,needDisplayTime:null,expressionUrl:null,commentLocationType:null,parentCommentId:null,decoration:null,repliedMark:null,liked:null,likedCount:null}],hotcommentlist:[{user:{nickname:'',avatarUrl:''},beReplied:null,artists:[],pendantData:null,showFloorComment:null,status:null,commentId:null,content:null,contentResource:null,time:'',timeStr:null,needDisplayTime:null,expressionUrl:null,commentLocationType:null,parentCommentId:null,decoration:null,repliedMark:null,liked:null,likedCount:null}]}),_useState6=_slicedToArray(_useState5,2),result=_useState6[0],setResult=_useState6[1];var _useParams=useParams(),id=_useParams.id;var vid=id;var hasPrevious=function hasPrevious(){return counter===1;};var goPage=function goPage(pageNum){counter=pageNum;comment({id:vid,limit:result.limit,offset:(counter-1)*result.limit//before:\n}).then(function(response){var res=response.data;if(counter>1){setResult({hotcommentlist:result.hotcommentlist,commentlist:res.comments,total:res.total,//type: result.type,\nlimit:result.limit,page:counter});}else{setResult({hotcommentlist:res.hotComments,commentlist:res.comments,total:res.total,//type: result.type,\nlimit:result.limit,page:counter});}});};var nextPage=function nextPage(){console.log(counter);console.log(vid);counter++;goPage(counter);};var previousPage=function previousPage(){console.log(counter);counter--;goPage(counter);};var handleInput=function handleInput(e){setInputPageNum(e.target.value);};var submitInputPage=function submitInputPage(){goPage(Number(inputPageNum));setInputPageNum('');};var goDetail=function goDetail(id,e){console.log(id);//window.open(`#/detail/${e}`, '_self')\nwindow.open(\"#/detail/\".concat(id),'_self');//window.open(`#/search/${e.target.value}`, '_self')\n};useEffect(function(){if(counter===0){goPage(1);}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"20px\",margin:\"0% 2% 0 10%\"},children:\"\\u8BC4\\u8BBA\"}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:\"0px 0 0 0px\"},children:[\"\\u627E\\u5230\\u4E86\",result.total,\"\\u6761\\u7ED3\\u679C\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{border:\" 2px solid rgb(219, 24, 17)\",margin:\"0% 10% 0 10%\"}}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"5% 10% 0 10%\"},children:\"\\u7CBE\\u5F69\\u8BC4\\u8BBA\"}),/*#__PURE__*/_jsx(\"div\",{style:{border:\" 1px solid #000\",margin:\"0 10% 0 10%\"}}),/*#__PURE__*/_jsx(List,{style:{margin:\"0% 10% 0 10%\"},className:\"result-list\",itemLayout:\"vertical\"// dataSource={data}\n// dataSource={result.commentlist}\n,dataSource:result.hotcommentlist,renderItem:function renderItem(item){return/*#__PURE__*/_jsxs(List.Item,{actions:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u70B9\\u8D5E\\u6570:\",item.likedCount,\" \",/*#__PURE__*/_jsx(LikeOutlined,{})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u56DE\\u590D: \",/*#__PURE__*/_jsx(CommentOutlined,{})]})],children:[/*#__PURE__*/_jsx(List.Item.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{size:\"large\",src:item.user.avatarUrl}),description:item.timeStr,title:/*#__PURE__*/_jsx(\"p\",{children:item.user.nickname})}),item.content]});}}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"2% 10% 0 10%\"},children:\"\\u6700\\u65B0\\u8BC4\\u8BBA\"}),/*#__PURE__*/_jsx(\"div\",{style:{border:\" 1px solid #000\",margin:\"0 10% 0 10%\"}}),/*#__PURE__*/_jsx(List,{itemLayout:\"vertical\",style:{margin:\"0 10% 0 10%\"},className:\"result-list\"// dataSource={data}\n,dataSource:result.commentlist//dataSource={result.hotcommentlist}\n,renderItem:function renderItem(item){return/*#__PURE__*/_jsxs(List.Item,{actions:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u70B9\\u8D5E\\u6570:\",item.likedCount,\" \",/*#__PURE__*/_jsx(LikeOutlined,{})]}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u56DE\\u590D\"})],children:[/*#__PURE__*/_jsx(List.Item.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{size:\"large\",src:item.user.avatarUrl}),description:item.timeStr,title:/*#__PURE__*/_jsx(\"p\",{children:item.user.nickname})}),item.content]});}}),/*#__PURE__*/_jsx(Footer,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"pages\",style:{margin:\"0 20% 0 10%\"},children:[/*#__PURE__*/_jsx(Button,{onClick:previousPage,disabled:hasPrevious(),children:\"\\u4E0A\\u4E00\\u9875\"}),/*#__PURE__*/_jsx(Button,{onClick:nextPage,children:\"\\u4E0B\\u4E00\\u9875\"}),\"\\u8BF7\\u8F93\\u5165\\u60A8\\u60F3\\u8DF3\\u8F6C\\u7684\\u9875\\u9762:\",/*#__PURE__*/_jsx(\"input\",{value:inputPageNum,onChange:handleInput}),/*#__PURE__*/_jsx(Button,{onClick:submitInputPage,children:\"\\u8DF3\\u8F6C\\u5230\\u6B64\\u9875\"})]})})]});}","map":{"version":3,"sources":["D:/vscode/react_netease_music/src/components/detail/Comment.tsx"],"names":["React","useEffect","useState","useParams","comment","Avatar","Button","List","LikeOutlined","CommentOutlined","Footer","counter","Comment","inputPageNum","setInputPageNum","songid","setSongid","limit","page","total","commentlist","user","nickname","avatarUrl","beReplied","artists","pendantData","showFloorComment","status","commentId","content","contentResource","time","timeStr","needDisplayTime","expressionUrl","commentLocationType","parentCommentId","decoration","repliedMark","liked","likedCount","hotcommentlist","result","setResult","id","vid","hasPrevious","goPage","pageNum","offset","then","response","res","data","comments","hotComments","nextPage","console","log","previousPage","handleInput","e","target","value","submitInputPage","Number","goDetail","window","open","fontSize","margin","border","item"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAAeC,SAAf,KAAgC,kBAAhC,CACA;AACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,MAAT,CAAiBC,MAAjB,CAAyBC,IAAzB,KAAqC,MAArC,CAIA,OAAQC,YAAR,CAAqBC,eAArB,KAAuD,6BAAvD,CACA,OAASC,MAAT,KAAuB,wBAAvB,CAEA;AACA;AACA;AACA;AACA;AACA,I,wFAsBA,GAAIC,CAAAA,OAAO,CAAG,CAAd,CACA;AACA,cAAe,SAASC,CAAAA,OAAT,EAAmB,eACUV,QAAQ,CAAC,EAAD,CADlB,wCACvBW,YADuB,eACTC,eADS,8BAEFZ,QAAQ,CAAC,EAAD,CAFN,yCAEvBa,MAFuB,eAEfC,SAFe,8BAGFd,QAAQ,CAAC,CACjC;AACA;AACA;AACAe,KAAK,CAAE,EAJ0B,CAKjC;AACAC,IAAI,CAAE,CAN2B,CAOjC;AACAC,KAAK,CAAE,CAR0B,CAUjCC,WAAW,CAAE,CAAC,CACVC,IAAI,CAAE,CACFC,QAAQ,CAAE,EADR,CAEFC,SAAS,CAAC,EAFR,CADI,CAKVC,SAAS,CAAE,IALD,CAMVC,OAAO,CAAE,EANC,CAOVC,WAAW,CAAE,IAPH,CAQVC,gBAAgB,CAAE,IARR,CASVC,MAAM,CAAE,IATE,CAUVC,SAAS,CAAE,IAVD,CAWVC,OAAO,CAAE,IAXC,CAYVC,eAAe,CAAE,IAZP,CAaVC,IAAI,CAAE,EAbI,CAcVC,OAAO,CAAE,IAdC,CAeVC,eAAe,CAAE,IAfP,CAgBVC,aAAa,CAAE,IAhBL,CAiBVC,mBAAmB,CAAE,IAjBX,CAkBVC,eAAe,CAAE,IAlBP,CAmBVC,UAAU,CAAE,IAnBF,CAoBVC,WAAW,CAAE,IApBH,CAqBVC,KAAK,CAAE,IArBG,CAsBVC,UAAU,CAAC,IAtBD,CAAD,CAVoB,CAkCjCC,cAAc,CAAE,CAAC,CACbrB,IAAI,CAAE,CACFC,QAAQ,CAAE,EADR,CAEFC,SAAS,CAAC,EAFR,CADO,CAKbC,SAAS,CAAE,IALE,CAMbC,OAAO,CAAE,EANI,CAObC,WAAW,CAAE,IAPA,CAQbC,gBAAgB,CAAE,IARL,CASbC,MAAM,CAAE,IATK,CAUbC,SAAS,CAAE,IAVE,CAWbC,OAAO,CAAE,IAXI,CAYbC,eAAe,CAAE,IAZJ,CAabC,IAAI,CAAE,EAbO,CAcbC,OAAO,CAAE,IAdI,CAebC,eAAe,CAAE,IAfJ,CAgBbC,aAAa,CAAE,IAhBF,CAiBbC,mBAAmB,CAAE,IAjBR,CAkBbC,eAAe,CAAE,IAlBJ,CAmBbC,UAAU,CAAE,IAnBC,CAoBbC,WAAW,CAAE,IApBA,CAqBbC,KAAK,CAAE,IArBM,CAsBbC,UAAU,CAAC,IAtBE,CAAD,CAlCiB,CAAD,CAHN,yCAGvBE,MAHuB,eAGfC,SAHe,8BA+DjBzC,SAAS,EA/DQ,CA+DxB0C,EA/DwB,YA+DxBA,EA/DwB,CAgE9B,GAAIC,CAAAA,GAAG,CAAGD,EAAV,CAEA,GAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,MAAOpC,CAAAA,OAAO,GAAK,CAAnB,CACH,CAFD,CAGA,GAAMqC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,OAAD,CAAqB,CAChCtC,OAAO,CAAGsC,OAAV,CACA7C,OAAO,CAAC,CACJyC,EAAE,CAAEC,GADA,CAEJ7B,KAAK,CAAE0B,MAAM,CAAC1B,KAFV,CAGJiC,MAAM,CAAE,CAACvC,OAAO,CAAG,CAAX,EAAgBgC,MAAM,CAAC1B,KAC/B;AAJI,CAAD,CAAP,CAKGkC,IALH,CAKQ,SAACC,QAAD,CAAc,CAClB,GAAIC,CAAAA,GAAG,CAAGD,QAAQ,CAACE,IAAnB,CACA,GAAG3C,OAAO,CAAG,CAAb,CAAe,CACXiC,SAAS,CAAC,CACNF,cAAc,CAACC,MAAM,CAACD,cADhB,CAENtB,WAAW,CAAEiC,GAAG,CAACE,QAFX,CAGNpC,KAAK,CAAEkC,GAAG,CAAClC,KAHL,CAIN;AACAF,KAAK,CAAE0B,MAAM,CAAC1B,KALR,CAMNC,IAAI,CAAEP,OANA,CAAD,CAAT,CAQH,CATD,IASK,CACDiC,SAAS,CAAC,CACNF,cAAc,CAACW,GAAG,CAACG,WADb,CAENpC,WAAW,CAAEiC,GAAG,CAACE,QAFX,CAGNpC,KAAK,CAAEkC,GAAG,CAAClC,KAHL,CAIN;AACAF,KAAK,CAAE0B,MAAM,CAAC1B,KALR,CAMNC,IAAI,CAAEP,OANA,CAAD,CAAT,CAQH,CAEJ,CA3BD,EA4BH,CA9BD,CA+BA,GAAM8C,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnBC,OAAO,CAACC,GAAR,CAAYhD,OAAZ,EACA+C,OAAO,CAACC,GAAR,CAAYb,GAAZ,EAEAnC,OAAO,GACPqC,MAAM,CAACrC,OAAD,CAAN,CACH,CAND,CAOA,GAAMiD,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBF,OAAO,CAACC,GAAR,CAAYhD,OAAZ,EACAA,OAAO,GACPqC,MAAM,CAACrC,OAAD,CAAN,CACH,CAJD,CAKA,GAAMkD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAA4C,CAC5DhD,eAAe,CAACgD,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,CACH,CAFD,CAGA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1BjB,MAAM,CAACkB,MAAM,CAACrD,YAAD,CAAP,CAAN,CACAC,eAAe,CAAC,EAAD,CAAf,CACH,CAHD,CAIA,GAAMqD,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACtB,EAAD,CAAaiB,CAAb,CAAwB,CACrCJ,OAAO,CAACC,GAAR,CAAYd,EAAZ,EACA;AACAuB,MAAM,CAACC,IAAP,oBAAwBxB,EAAxB,EAA8B,OAA9B,EACA;AAGH,CAPD,CAQA5C,SAAS,CAAC,UAAM,CACZ,GAAIU,OAAO,GAAK,CAAhB,CAAmB,CACfqC,MAAM,CAAC,CAAD,CAAN,CACH,CACJ,CAJQ,CAAT,CAMA,mBACI,oCAEI,oCACI,aAAM,KAAK,CAAE,CAACsB,QAAQ,CAAC,MAAV,CAAiBC,MAAM,CAAC,aAAxB,CAAb,0BADJ,cACkE,cAAM,KAAK,CAAE,CAAEA,MAAM,CAAE,aAAV,CAAb,gCAA4C5B,MAAM,CAACxB,KAAnD,wBADlE,GAFJ,cAKI,YAAK,KAAK,CAAE,CAACqD,MAAM,CAAC,6BAAR,CAAsCD,MAAM,CAAC,cAA7C,CAAZ,EALJ,cAMI,YAAK,KAAK,CAAE,CAACA,MAAM,CAAC,cAAR,CAAZ,sCANJ,cAOI,YAAK,KAAK,CAAE,CAACC,MAAM,CAAC,iBAAR,CAA0BD,MAAM,CAAC,aAAjC,CAAZ,EAPJ,cAQI,KAAC,IAAD,EACA,KAAK,CAAE,CAACA,MAAM,CAAC,cAAR,CADP,CAEI,SAAS,CAAC,aAFd,CAGI,UAAU,CAAC,UACX;AACA;AALJ,CAMI,UAAU,CAAE5B,MAAM,CAACD,cANvB,CAOI,UAAU,CAAE,oBAAA+B,IAAI,qBACZ,MAAC,IAAD,CAAM,IAAN,EACA,OAAO,CAAE,cACL,6CAAUA,IAAI,CAAChC,UAAf,kBAA2B,KAAC,YAAD,IAA3B,GADK,cAGL,qDAAS,KAAC,eAAD,IAAT,GAHK,CADT,wBAOI,KAAC,IAAD,CAAM,IAAN,CAAW,IAAX,EACI,MAAM,cAAE,KAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,CAAqB,GAAG,CAAEgC,IAAI,CAACpD,IAAL,CAAUE,SAApC,EADZ,CAEI,WAAW,CAAEkD,IAAI,CAACxC,OAFtB,CAGI,KAAK,cAAE,mBAAIwC,IAAI,CAACpD,IAAL,CAAUC,QAAd,EAHX,EAPJ,CAYKmD,IAAI,CAAC3C,OAZV,GADY,EAPpB,EARJ,cAiCI,YAAK,KAAK,CAAE,CAACyC,MAAM,CAAC,cAAR,CAAZ,sCAjCJ,cAkCI,YAAK,KAAK,CAAE,CAACC,MAAM,CAAC,iBAAR,CAA0BD,MAAM,CAAC,aAAjC,CAAZ,EAlCJ,cAmCI,KAAC,IAAD,EACI,UAAU,CAAC,UADf,CAEI,KAAK,CAAE,CAACA,MAAM,CAAC,aAAR,CAFX,CAGI,SAAS,CAAC,aACV;AAJJ,CAKI,UAAU,CAAE5B,MAAM,CAACvB,WACnB;AANJ,CAOI,UAAU,CAAE,oBAAAqD,IAAI,qBACZ,MAAC,IAAD,CAAM,IAAN,EACA,OAAO,CAAE,cACL,6CAAUA,IAAI,CAAChC,UAAf,kBAA2B,KAAC,YAAD,IAA3B,GADK,cAGL,qCAHK,CADT,wBAOI,KAAC,IAAD,CAAM,IAAN,CAAW,IAAX,EACI,MAAM,cAAE,KAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,CAAqB,GAAG,CAAEgC,IAAI,CAACpD,IAAL,CAAUE,SAApC,EADZ,CAEI,WAAW,CAAEkD,IAAI,CAACxC,OAFtB,CAGI,KAAK,cAAE,mBAAIwC,IAAI,CAACpD,IAAL,CAAUC,QAAd,EAHX,EAPJ,CAYKmD,IAAI,CAAC3C,OAZV,GADY,EAPpB,EAnCJ,cA6DI,KAAC,MAAD,wBACA,aAAK,SAAS,CAAC,OAAf,CAAuB,KAAK,CAAE,CAACyC,MAAM,CAAC,aAAR,CAA9B,wBACI,KAAC,MAAD,EAAQ,OAAO,CAAEX,YAAjB,CAA+B,QAAQ,CAAEb,WAAW,EAApD,gCADJ,cAGI,KAAC,MAAD,EAAQ,OAAO,CAAEU,QAAjB,gCAHJ,8EAIe,cAAO,KAAK,CAAE5C,YAAd,CAA4B,QAAQ,CAAEgD,WAAtC,EAJf,cAKI,KAAC,MAAD,EAAQ,OAAO,CAAEI,eAAjB,4CALJ,GADA,EA7DJ,GADJ,CA0EH","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\n//import {search} from \"../utils/search\";\r\nimport { comment } from \"../utils/comment\";\r\nimport { Avatar, Button, List } from \"antd\";\r\nimport { VerticalAlignTopOutlined, HeartOutlined } from '@ant-design/icons'\r\nimport moment from 'moment';\r\nimport Item from \"antd/lib/list/Item\";\r\nimport {LikeOutlined,CommentOutlined,LikeTwoTone} from \"@ant-design/icons/lib/icons\";\r\nimport { Footer } from \"antd/lib/layout/layout\";\r\n\r\n//封装歌曲结果对象\r\n/*\r\n* 不得不吐槽一下Typescript要求真多，这些参数是通过报错信息找到的，\r\n* 如果想看，可以在下面渲染的时候，在map中把value的类型去掉，并在li的渲染中直接渲染value，react会在报错信息中提示\r\n* 还不太清楚各个参数具体的类型，所以暂时都使用any\r\n* */\r\ninterface CommentProps {\r\n    user: any,\r\n    beReplied: any,\r\n    artists: any,\r\n    pendantData: any,\r\n    showFloorComment: any,\r\n    status: any,\r\n    commentId: any,\r\n    content: any,\r\n    contentResource: any,\r\n    time: any,\r\n    timeStr: any,\r\n    needDisplayTime: any,\r\n    expressionUrl: any,\r\n    commentLocationType: any,\r\n    parentCommentId: any,\r\n    decoration: any,\r\n    repliedMark: any,\r\n    liked: any,\r\n    likedCount:any,\r\n}\r\nlet counter = 0;\r\n//第二版搜索结果\r\nexport default function Comment() {\r\n    const [inputPageNum, setInputPageNum] = useState('');\r\n    const [songid, setSongid] = useState('');\r\n    const [result, setResult] = useState({\r\n        // 类型\r\n        //type: '1',\r\n        // 页容量\r\n        limit: 15,\r\n        // 页码\r\n        page: 1,\r\n        // 总条数\r\n        total: 0,\r\n\r\n        commentlist: [{\r\n            user: {\r\n                nickname: '',\r\n                avatarUrl:'',\r\n            },\r\n            beReplied: null,\r\n            artists: [],\r\n            pendantData: null,\r\n            showFloorComment: null,\r\n            status: null,\r\n            commentId: null,\r\n            content: null,\r\n            contentResource: null,\r\n            time: '',\r\n            timeStr: null,\r\n            needDisplayTime: null,\r\n            expressionUrl: null,\r\n            commentLocationType: null,\r\n            parentCommentId: null,\r\n            decoration: null,\r\n            repliedMark: null,\r\n            liked: null,\r\n            likedCount:null,\r\n        }],\r\n        hotcommentlist: [{\r\n            user: {\r\n                nickname: '',\r\n                avatarUrl:'',\r\n            },\r\n            beReplied: null,\r\n            artists: [],\r\n            pendantData: null,\r\n            showFloorComment: null,\r\n            status: null,\r\n            commentId: null,\r\n            content: null,\r\n            contentResource: null,\r\n            time: '',\r\n            timeStr: null,\r\n            needDisplayTime: null,\r\n            expressionUrl: null,\r\n            commentLocationType: null,\r\n            parentCommentId: null,\r\n            decoration: null,\r\n            repliedMark: null,\r\n            liked: null,\r\n            likedCount:null,\r\n        }],\r\n\r\n    });\r\n    let { id } = useParams();\r\n    let vid = id;\r\n\r\n    const hasPrevious = () => {\r\n        return counter === 1;\r\n    }\r\n    const goPage = (pageNum: number) => {\r\n        counter = pageNum;\r\n        comment({\r\n            id: vid,\r\n            limit: result.limit,\r\n            offset: (counter - 1) * result.limit,\r\n            //before:\r\n        }).then((response) => {\r\n            let res = response.data;\r\n            if(counter > 1){\r\n                setResult({\r\n                    hotcommentlist:result.hotcommentlist,\r\n                    commentlist: res.comments,\r\n                    total: res.total,\r\n                    //type: result.type,\r\n                    limit: result.limit,\r\n                    page: counter,\r\n                })\r\n            }else{\r\n                setResult({\r\n                    hotcommentlist:res.hotComments,\r\n                    commentlist: res.comments,\r\n                    total: res.total,\r\n                    //type: result.type,\r\n                    limit: result.limit,\r\n                    page: counter,\r\n                })\r\n            }\r\n           \r\n        })\r\n    }\r\n    const nextPage = () => {\r\n        console.log(counter);\r\n        console.log(vid);\r\n\r\n        counter++;\r\n        goPage(counter);\r\n    }\r\n    const previousPage = () => {\r\n        console.log(counter);\r\n        counter--;\r\n        goPage(counter);\r\n    }\r\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setInputPageNum(e.target.value);\r\n    }\r\n    const submitInputPage = () => {\r\n        goPage(Number(inputPageNum));\r\n        setInputPageNum('');\r\n    }\r\n    const goDetail = (id: string, e: any) => {\r\n        console.log(id);\r\n        //window.open(`#/detail/${e}`, '_self')\r\n        window.open(`#/detail/${id}`, '_self')\r\n        //window.open(`#/search/${e.target.value}`, '_self')\r\n\r\n\r\n    }\r\n    useEffect(() => {\r\n        if (counter === 0) {\r\n            goPage(1);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n\r\n            <div>\r\n                <span style={{fontSize:\"20px\",margin:\"0% 2% 0 10%\"}}>评论</span><span style={{ margin: \"0px 0 0 0px\" }}>找到了{result.total}条结果</span>\r\n            </div>\r\n            <div style={{border:\" 2px solid rgb(219, 24, 17)\",margin:\"0% 10% 0 10%\"}}></div> \r\n            <div style={{margin:\"5% 10% 0 10%\"}}>精彩评论</div>\r\n            <div style={{border:\" 1px solid #000\",margin:\"0 10% 0 10%\"}}></div> \r\n            <List\r\n            style={{margin:\"0% 10% 0 10%\"}}\r\n                className=\"result-list\"\r\n                itemLayout=\"vertical\"\r\n                // dataSource={data}\r\n                // dataSource={result.commentlist}\r\n                dataSource={result.hotcommentlist}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                    actions={[\r\n                        <div>点赞数:{item.likedCount} <LikeOutlined /></div>,\r\n\r\n                        <div>回复: <CommentOutlined /></div>,\r\n                      ]}>\r\n                                          \r\n                        <List.Item.Meta\r\n                            avatar={<Avatar size=\"large\" src={item.user.avatarUrl}/>}\r\n                            description={item.timeStr}\r\n                            title={<p>{item.user.nickname}</p>}\r\n                        />\r\n                        {item.content}                        \r\n                        \r\n                    </List.Item>\r\n                )}\r\n            />\r\n            <div style={{margin:\"2% 10% 0 10%\"}} >最新评论</div>\r\n            <div style={{border:\" 1px solid #000\",margin:\"0 10% 0 10%\"}}></div> \r\n            <List\r\n                itemLayout=\"vertical\"\r\n                style={{margin:\"0 10% 0 10%\"}}\r\n                className=\"result-list\"                \r\n                // dataSource={data}\r\n                dataSource={result.commentlist}\r\n                //dataSource={result.hotcommentlist}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                    actions={[\r\n                        <div>点赞数:{item.likedCount} <LikeOutlined /></div>,\r\n\r\n                        <div>回复</div>,\r\n                      ]}>\r\n                                          \r\n                        <List.Item.Meta\r\n                            avatar={<Avatar size=\"large\" src={item.user.avatarUrl}/>}\r\n                            description={item.timeStr}\r\n                            title={<p>{item.user.nickname}</p>}\r\n                        />\r\n                        {item.content}                        \r\n                        \r\n                    </List.Item>\r\n                )}\r\n            />\r\n            \r\n            <Footer>\r\n            <div className=\"pages\" style={{margin:\"0 20% 0 10%\"}}>\r\n                <Button onClick={previousPage} disabled={hasPrevious()}>上一页</Button>\r\n               \r\n                <Button onClick={nextPage}>下一页</Button>\r\n                请输入您想跳转的页面:<input value={inputPageNum} onChange={handleInput} />\r\n                <Button onClick={submitInputPage}>跳转到此页</Button>\r\n            </div>\r\n            </Footer>\r\n\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}