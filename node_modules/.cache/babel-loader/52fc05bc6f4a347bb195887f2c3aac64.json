{"ast":null,"code":"var _jsxFileName = \"D:\\\\vscode\\\\react_netease_music\\\\src\\\\components\\\\detail\\\\Comment.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\"; //import {search} from \"../utils/search\";\n\nimport { comment } from \"../utils/comment\";\nimport { Avatar, Button, List } from \"antd\";\nimport { LikeOutlined, CommentOutlined } from '@ant-design/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet counter = 0;\nexport default function Comment() {\n  _s();\n\n  const [inputPageNum, setInputPageNum] = useState('');\n  const [songid, setSongid] = useState('');\n  const [result, setResult] = useState({\n    // 类型\n    //type: '1',\n    // 页容量\n    limit: 15,\n    // 页码\n    page: 1,\n    // 总条数\n    total: 0,\n    commentlist: [{\n      user: {\n        nickname: '',\n        avatarUrl: ''\n      },\n      beReplied: null,\n      artists: [],\n      pendantData: null,\n      showFloorComment: null,\n      status: null,\n      commentId: null,\n      content: null,\n      contentResource: null,\n      time: '',\n      timeStr: null,\n      needDisplayTime: null,\n      expressionUrl: null,\n      commentLocationType: null,\n      parentCommentId: null,\n      decoration: null,\n      repliedMark: null,\n      liked: null,\n      likedCount: null\n    }],\n    hotcommentlist: [{\n      user: {\n        nickname: '',\n        avatarUrl: ''\n      },\n      beReplied: null,\n      artists: [],\n      pendantData: null,\n      showFloorComment: null,\n      status: null,\n      commentId: null,\n      content: null,\n      contentResource: null,\n      time: '',\n      timeStr: null,\n      needDisplayTime: null,\n      expressionUrl: null,\n      commentLocationType: null,\n      parentCommentId: null,\n      decoration: null,\n      repliedMark: null,\n      liked: null,\n      likedCount: null\n    }]\n  });\n  let {\n    id\n  } = useParams();\n  let vid = id;\n\n  const hasPrevious = () => {\n    return counter === 1;\n  };\n\n  const hasNext = () => {\n    return counter === Math.floor(result.total / result.limit) + 1;\n  };\n\n  const goPage = pageNum => {\n    counter = pageNum;\n    comment({\n      id: vid,\n      limit: result.limit,\n      offset: (counter - 1) * result.limit //before:\n\n    }).then(response => {\n      let res = response.data;\n\n      if (counter > 1) {\n        setResult({\n          hotcommentlist: result.hotcommentlist,\n          commentlist: res.comments,\n          total: res.total,\n          //type: result.type,\n          limit: result.limit,\n          page: counter\n        });\n      } else {\n        setResult({\n          hotcommentlist: res.hotComments,\n          commentlist: res.comments,\n          total: res.total,\n          //type: result.type,\n          limit: result.limit,\n          page: counter\n        });\n      }\n    });\n  };\n\n  const nextPage = () => {\n    console.log(counter);\n    console.log(vid);\n    counter++;\n    goPage(counter);\n  };\n\n  const previousPage = () => {\n    console.log(counter);\n    counter--;\n    goPage(counter);\n  };\n\n  const handleInput = e => {\n    setInputPageNum(e.target.value);\n  };\n\n  const submitInputPage = () => {\n    goPage(Number(inputPageNum));\n    setInputPageNum('');\n  };\n\n  const goDetail = (id, e) => {\n    console.log(id);\n    window.open(`#/detail/${id}`, '_self');\n  };\n\n  useEffect(() => {\n    if (counter === 0 || counter === 1) {\n      goPage(1);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: \"20px\",\n          margin: \"0% 2% 0 10%\"\n        },\n        children: \"\\u8BC4\\u8BBA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          margin: \"0px 0 0 0px\"\n        },\n        children: [\"\\u627E\\u5230\\u4E86\", result.total, \"\\u6761\\u7ED3\\u679C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 84\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \" 2px solid rgb(219, 24, 17)\",\n        margin: \"0% 10% 0 10%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"5% 10% 0 10%\"\n      },\n      children: \"\\u7CBE\\u5F69\\u8BC4\\u8BBA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \" 1px solid #000\",\n        margin: \"0 10% 0 10%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      style: {\n        margin: \"0% 10% 0 10%\"\n      },\n      className: \"result-list\",\n      itemLayout: \"vertical\",\n      dataSource: result.hotcommentlist,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        actions: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u70B9\\u8D5E\\u6570:\", item.likedCount, \" \", /*#__PURE__*/_jsxDEV(LikeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 56\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u56DE\\u590D: \", /*#__PURE__*/_jsxDEV(CommentOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 29\n        }, this)],\n        children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n            size: \"large\",\n            src: item.user.avatarUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 37\n          }, this),\n          description: item.timeStr,\n          title: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.user.nickname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this), item.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"2% 10% 0 10%\"\n      },\n      children: \"\\u6700\\u65B0\\u8BC4\\u8BBA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \" 1px solid #000\",\n        margin: \"0 10% 0 10%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      itemLayout: \"vertical\",\n      style: {\n        margin: \"0 10% 0 10%\"\n      },\n      className: \"result-list\" // dataSource={data}\n      ,\n      dataSource: result.commentlist //dataSource={result.hotcommentlist}\n      ,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        actions: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u70B9\\u8D5E\\u6570:\", item.likedCount, \" \", /*#__PURE__*/_jsxDEV(LikeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 56\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\u56DE\\u590D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 29\n        }, this)],\n        children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n            size: \"large\",\n            src: item.user.avatarUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 37\n          }, this),\n          description: item.timeStr,\n          title: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.user.nickname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 25\n        }, this), item.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pages\",\n      style: {\n        margin: \"0 10% 0 10%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: previousPage,\n        disabled: hasPrevious(),\n        children: \"\\u4E0A\\u4E00\\u9875\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: nextPage,\n        disabled: hasNext(),\n        children: \"\\u4E0B\\u4E00\\u9875\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), \"\\u8BF7\\u8F93\\u5165\\u60A8\\u60F3\\u8DF3\\u8F6C\\u7684\\u9875\\u9762:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: inputPageNum,\n        onChange: handleInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: submitInputPage,\n        children: \"\\u8DF3\\u8F6C\\u5230\\u6B64\\u9875\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Comment, \"zEN54cDt/Da6W/ydYV+5XnounkY=\", false, function () {\n  return [useParams];\n});\n\n_c = Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["D:/vscode/react_netease_music/src/components/detail/Comment.tsx"],"names":["React","useEffect","useState","useParams","comment","Avatar","Button","List","LikeOutlined","CommentOutlined","counter","Comment","inputPageNum","setInputPageNum","songid","setSongid","result","setResult","limit","page","total","commentlist","user","nickname","avatarUrl","beReplied","artists","pendantData","showFloorComment","status","commentId","content","contentResource","time","timeStr","needDisplayTime","expressionUrl","commentLocationType","parentCommentId","decoration","repliedMark","liked","likedCount","hotcommentlist","id","vid","hasPrevious","hasNext","Math","floor","goPage","pageNum","offset","then","response","res","data","comments","hotComments","nextPage","console","log","previousPage","handleInput","e","target","value","submitInputPage","Number","goDetail","window","open","fontSize","margin","border","item"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\n//import {search} from \"../utils/search\";\r\nimport { comment } from \"../utils/comment\";\r\nimport { Avatar, Button, List } from \"antd\";\r\nimport { LikeOutlined, CommentOutlined } from '@ant-design/icons'\r\nimport moment from 'moment';\r\nimport Item from \"antd/lib/list/Item\";\r\nimport { Footer } from \"antd/lib/layout/layout\";\r\n\r\ninterface CommentProps {\r\n    user: any,\r\n    beReplied: any,\r\n    artists: any,\r\n    pendantData: any,\r\n    showFloorComment: any,\r\n    status: any,\r\n    commentId: any,\r\n    content: any,\r\n    contentResource: any,\r\n    time: any,\r\n    timeStr: any,\r\n    needDisplayTime: any,\r\n    expressionUrl: any,\r\n    commentLocationType: any,\r\n    parentCommentId: any,\r\n    decoration: any,\r\n    repliedMark: any,\r\n    liked: any,\r\n    likedCount: any,\r\n}\r\nlet counter = 0;\r\nexport default function Comment() {\r\n    const [inputPageNum, setInputPageNum] = useState('');\r\n    const [songid, setSongid] = useState('');\r\n    const [result, setResult] = useState({\r\n        // 类型\r\n        //type: '1',\r\n        // 页容量\r\n        limit: 15,\r\n        // 页码\r\n        page: 1,\r\n        // 总条数\r\n        total: 0,\r\n\r\n        commentlist: [{\r\n            user: {\r\n                nickname: '',\r\n                avatarUrl: '',\r\n            },\r\n            beReplied: null,\r\n            artists: [],\r\n            pendantData: null,\r\n            showFloorComment: null,\r\n            status: null,\r\n            commentId: null,\r\n            content: null,\r\n            contentResource: null,\r\n            time: '',\r\n            timeStr: null,\r\n            needDisplayTime: null,\r\n            expressionUrl: null,\r\n            commentLocationType: null,\r\n            parentCommentId: null,\r\n            decoration: null,\r\n            repliedMark: null,\r\n            liked: null,\r\n            likedCount: null,\r\n        }],\r\n        hotcommentlist: [{\r\n            user: {\r\n                nickname: '',\r\n                avatarUrl: '',\r\n            },\r\n            beReplied: null,\r\n            artists: [],\r\n            pendantData: null,\r\n            showFloorComment: null,\r\n            status: null,\r\n            commentId: null,\r\n            content: null,\r\n            contentResource: null,\r\n            time: '',\r\n            timeStr: null,\r\n            needDisplayTime: null,\r\n            expressionUrl: null,\r\n            commentLocationType: null,\r\n            parentCommentId: null,\r\n            decoration: null,\r\n            repliedMark: null,\r\n            liked: null,\r\n            likedCount: null,\r\n        }],\r\n\r\n    });\r\n    let { id } = useParams();\r\n    let vid = id;\r\n\r\n    const hasPrevious = () => {\r\n        return counter === 1;\r\n    }\r\n    const hasNext = () => {      \r\n        return counter === (Math.floor(result.total/result.limit) + 1);\r\n    }\r\n    const goPage = (pageNum: number) => {\r\n        counter = pageNum;\r\n        comment({\r\n            id: vid,\r\n            limit: result.limit,\r\n            offset: (counter - 1) * result.limit,\r\n            //before:\r\n        }).then((response) => {\r\n            let res = response.data;\r\n            if (counter > 1) {\r\n                setResult({\r\n                    hotcommentlist: result.hotcommentlist,\r\n                    commentlist: res.comments,\r\n                    total: res.total,\r\n                    //type: result.type,\r\n                    limit: result.limit,\r\n                    page: counter,\r\n                })\r\n            } else {\r\n                setResult({\r\n                    hotcommentlist: res.hotComments,\r\n                    commentlist: res.comments,\r\n                    total: res.total,\r\n                    //type: result.type,\r\n                    limit: result.limit,\r\n                    page: counter,\r\n                })\r\n            }\r\n\r\n        })\r\n    }\r\n    const nextPage = () => {\r\n        console.log(counter);\r\n        console.log(vid);\r\n\r\n        counter++;\r\n        goPage(counter);\r\n    }\r\n    const previousPage = () => {\r\n        console.log(counter);\r\n        counter--;\r\n        goPage(counter);\r\n    }\r\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setInputPageNum(e.target.value);\r\n    }\r\n    const submitInputPage = () => {\r\n        goPage(Number(inputPageNum));\r\n        setInputPageNum('');\r\n    }\r\n    const goDetail = (id: string, e: any) => {\r\n        console.log(id);\r\n        window.open(`#/detail/${id}`, '_self')\r\n    }\r\n    useEffect(() => {\r\n        if (counter === 0|| counter === 1) {\r\n            goPage(1);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n\r\n            <div>\r\n                <span style={{ fontSize: \"20px\", margin: \"0% 2% 0 10%\" }}>评论</span><span style={{ margin: \"0px 0 0 0px\" }}>找到了{result.total}条结果</span>\r\n            </div>\r\n            <div style={{ border: \" 2px solid rgb(219, 24, 17)\", margin: \"0% 10% 0 10%\" }}></div>\r\n            <div style={{ margin: \"5% 10% 0 10%\" }}>精彩评论</div>\r\n            <div style={{ border: \" 1px solid #000\", margin: \"0 10% 0 10%\" }}></div>\r\n            <List\r\n                style={{ margin: \"0% 10% 0 10%\" }}\r\n                className=\"result-list\"\r\n                itemLayout=\"vertical\"\r\n                dataSource={result.hotcommentlist}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                        actions={[\r\n                            <div>点赞数:{item.likedCount} <LikeOutlined /></div>,\r\n                            <div>回复: <CommentOutlined /></div>,\r\n                        ]}>\r\n\r\n                        <List.Item.Meta\r\n                            avatar={<Avatar size=\"large\" src={item.user.avatarUrl} />}\r\n                            description={item.timeStr}\r\n                            title={<p>{item.user.nickname}</p>}\r\n                        />\r\n                        {item.content}\r\n                    </List.Item>\r\n                )}\r\n            />\r\n            <div style={{ margin: \"2% 10% 0 10%\" }} >最新评论</div>\r\n            <div style={{ border: \" 1px solid #000\", margin: \"0 10% 0 10%\" }}></div>\r\n            <List\r\n                itemLayout=\"vertical\"\r\n                style={{ margin: \"0 10% 0 10%\" }}\r\n                className=\"result-list\"\r\n                // dataSource={data}\r\n                dataSource={result.commentlist}\r\n                //dataSource={result.hotcommentlist}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                        actions={[\r\n                            <div>点赞数:{item.likedCount} <LikeOutlined /></div>,\r\n                            <div>回复</div>,\r\n                        ]}>\r\n\r\n                        <List.Item.Meta\r\n                            avatar={<Avatar size=\"large\" src={item.user.avatarUrl} />}\r\n                            description={item.timeStr}\r\n                            title={<p>{item.user.nickname}</p>}\r\n                        />\r\n                        {item.content}\r\n                    </List.Item>\r\n                )}\r\n            />\r\n            <div className=\"pages\" style={{ margin: \"0 10% 0 10%\" }}>\r\n                <Button onClick={previousPage} disabled={hasPrevious()}>上一页</Button>\r\n                <Button onClick={nextPage} disabled={hasNext()}>下一页</Button>\r\n                请输入您想跳转的页面:<input value={inputPageNum} onChange={handleInput} />\r\n                <Button onClick={submitInputPage}>跳转到此页</Button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}