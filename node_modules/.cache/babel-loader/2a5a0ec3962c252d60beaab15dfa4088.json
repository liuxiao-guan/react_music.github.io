{"ast":null,"code":"import _slicedToArray from\"D:/vscode/react_netease_music/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";// import {search} from \"../utils/search\";\nimport{lyric}from\"../utils/lyric\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var counter=0;export default function Lyric(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inputPageNum=_useState2[0],setInputPageNum=_useState2[1];var _useState3=useState({lyric:\"你好\",lyricList:[{time:\"\",lyc:\"\"}]}),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useParams=useParams(),id=_useParams.id;var hasPrevious=function hasPrevious(){return counter===1;};var goPage=function goPage(pageNum){counter=pageNum;lyric({id:id}).then(function(response){var res=response.data;// console.log(res);\n// console.log(res.lrc);\nvar res1=res.lrc;var lyricList=result.lyricList;// console.log(res1);\nvar lyc1=res1.lyric;lyc1.split(/[\\n]/)// 截取中括号\n.forEach(function(item){var temp=item.split(/\\[(.+?)\\]/);lyricList.push({time:temp[1],// 时间\nlyc:temp[2]//歌词内容\n});});lyricList=lyricList.filter(function(v){return v['lyc'];});// 去除无歌词内容\nsetResult({lyric:res['lrc']['lyric'],lyricList:lyricList});});};var nextPage=function nextPage(){console.log(counter);counter++;goPage(counter);};var previousPage=function previousPage(){console.log(counter);counter--;goPage(counter);};var handleInput=function handleInput(e){setInputPageNum(e.target.value);};var submitInputPage=function submitInputPage(){goPage(Number(inputPageNum));setInputPageNum('');};var goDetail=function goDetail(){window.open('#/detail','_self');};useEffect(function(){if(counter===0){goPage(1);}});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{style:{margin:\"2% 10% 40px 10%\"},children:result.lyricList.map(function(value,index){return/*#__PURE__*/_jsxs(\"li\",{onClick:goDetail,children:[value.time,\"-----------\\u6B4C\\u8BCD:\",value.lyc]},index);})})});}","map":{"version":3,"sources":["D:/vscode/react_netease_music/src/components/detail/Lyric.tsx"],"names":["React","useEffect","useState","useParams","lyric","counter","Lyric","inputPageNum","setInputPageNum","lyricList","time","lyc","result","setResult","id","hasPrevious","goPage","pageNum","then","response","res","data","res1","lrc","lyc1","split","forEach","item","temp","push","filter","v","nextPage","console","log","previousPage","handleInput","e","target","value","submitInputPage","Number","goDetail","window","open","margin","map","index"],"mappings":"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","sourcesContent":["\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n// import {search} from \"../utils/search\";\r\nimport { lyric } from \"../utils/lyric\";\r\n\r\ninterface SongProps {\r\n    id: any,\r\n    name: any,\r\n    artists: any,\r\n    album: any,\r\n    duration: any,\r\n    copyrightId: any,\r\n    status: any,\r\n    alias: any,\r\n    rtype: any,\r\n    ftype: any,\r\n    mvid: any,\r\n    fee: any,\r\n    rUrl: any,\r\n    mark: any,\r\n}\r\nexport interface lyricmodel {\r\n    time: string,\r\n    lyc: string,\r\n}\r\nlet counter = 0;\r\nexport default function Lyric() {\r\n    const [inputPageNum, setInputPageNum] = useState('');\r\n    const [result, setResult] = useState({\r\n        lyric: \"你好\",\r\n        lyricList: [{ time: \"\", lyc: \"\" }],\r\n\r\n    });\r\n    let { id } = useParams();\r\n    const hasPrevious = () => {\r\n        return counter === 1;\r\n    }\r\n    const goPage = (pageNum: number) => {\r\n        counter = pageNum;\r\n        lyric({\r\n            id: id as string,\r\n        }).then((response) => {\r\n            let res = response.data;\r\n            // console.log(res);\r\n            // console.log(res.lrc);\r\n            let res1 = res.lrc;\r\n            let lyricList = result.lyricList\r\n            // console.log(res1);\r\n            let lyc1 = res1.lyric as string\r\n\r\n            lyc1.split(/[\\n]/) // 截取中括号\r\n                .forEach((item: string) => {\r\n                    let temp: Array<string> = item.split(/\\[(.+?)\\]/)\r\n                    lyricList.push(\r\n                        {\r\n                            time: temp[1], // 时间\r\n                            lyc: temp[2] //歌词内容\r\n                        })\r\n                })\r\n            lyricList = lyricList.filter((v: { [x: string]: any; }) => v['lyc']) // 去除无歌词内容\r\n            setResult({\r\n                lyric: res['lrc']['lyric'],\r\n                lyricList\r\n            })\r\n        })\r\n    }\r\n    const nextPage = () => {\r\n        console.log(counter);\r\n        counter++;\r\n        goPage(counter);\r\n    }\r\n    const previousPage = () => {\r\n        console.log(counter);\r\n        counter--;\r\n        goPage(counter);\r\n    }\r\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setInputPageNum(e.target.value);\r\n    }\r\n    const submitInputPage = () => {\r\n        goPage(Number(inputPageNum));\r\n        setInputPageNum('');\r\n    }\r\n    const goDetail = () => {\r\n        window.open('#/detail', '_self');\r\n    }\r\n    useEffect(() => {\r\n        if (counter === 0) {\r\n            goPage(1);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <ul style={{ margin: \"2% 10% 40px 10%\" }}>\r\n                {result.lyricList.map((value: lyricmodel, index) => {\r\n                    return (\r\n                        <li key={index} onClick={goDetail}>\r\n                            {value.time}-----------歌词:{value.lyc}\r\n                        </li>\r\n                    );\r\n                })}\r\n            </ul>\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}