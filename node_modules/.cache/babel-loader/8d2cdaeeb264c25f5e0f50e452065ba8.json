{"ast":null,"code":"var _jsxFileName = \"D:\\\\vscode\\\\react_netease_music\\\\src\\\\components\\\\search\\\\SearchResult.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport HeartTwoTone from '@ant-design/icons/lib/icons/HeartTwoTone';\nimport { search } from \"../utils/search\";\nimport { Avatar, Button, List, Menu } from \"antd\";\nimport { PlayCircleOutlined, DownloadOutlined } from \"@ant-design/icons/lib/icons\";\nimport TopJumper from \"../detail/TopJumper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet counter = 0; //第二版搜索结果\n\nexport default function SearchResult() {\n  _s();\n\n  const [inputPageNum, setInputPageNum] = useState('');\n  const [result, setResult] = useState({\n    // 类型\n    type: '1',\n    // 页容量\n    limit: 15,\n    // 页码\n    page: 1,\n    // 总条数\n    total: 0,\n    songList: [{\n      id: null,\n      name: null,\n      artists: [],\n      album: {\n        name: null,\n        artist: {\n          img1v1Url: null\n        }\n      },\n      duration: '',\n      copyrightId: null,\n      status: null,\n      alias: null,\n      rtype: null,\n      ftype: null,\n      mvid: null,\n      fee: null,\n      rUrl: null,\n      mark: null\n    }]\n  });\n  let {\n    keyword\n  } = useParams();\n\n  const hasPrevious = () => {\n    return counter === 1;\n  };\n\n  const goPage = pageNum => {\n    counter = pageNum;\n    search({\n      keywords: keyword,\n      limit: result.limit,\n      offset: (counter - 1) * result.limit,\n      type: result.type\n    }).then(response => {\n      let res = response.data;\n      setResult({\n        songList: res.result.songs,\n        total: res.result.songCount,\n        type: result.type,\n        limit: result.limit,\n        page: counter\n      });\n    });\n  };\n\n  const nextPage = () => {\n    console.log(counter);\n    counter++;\n    goPage(counter);\n  };\n\n  const previousPage = () => {\n    console.log(counter);\n    counter--;\n    goPage(counter);\n  };\n\n  const handleInput = e => {\n    setInputPageNum(e.target.value);\n  };\n\n  const submitInputPage = () => {\n    goPage(Number(inputPageNum));\n    setInputPageNum('');\n  };\n\n  const goDetail = (id, e) => {\n    console.log(id);\n    window.open(`#/detail/${id}`, '_self');\n  };\n\n  const showPlayList = (keyword, e) => {\n    window.open(`#/searchplaylist/${keyword}`, '_self');\n  };\n\n  useEffect(() => {\n    if (counter === 0) {\n      goPage(1);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Menu, {\n      theme: \"light\",\n      mode: \"horizontal\",\n      children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: \"\\u5355\\u66F2\"\n      }, \"song\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: \"\\u6B4C\\u624B\"\n      }, \"singer\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: \"\\u4E13\\u8F91\"\n      }, \"album\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        children: \"\\u89C6\\u9891\"\n      }, \"vedio\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        onClick: e => showPlayList(keyword, e),\n        children: \"\\u6B4C\\u5355\"\n      }, \"songList\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(List, {\n        className: \"list\",\n        itemLayout: \"horizontal\",\n        dataSource: result.songList,\n        header: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"keyword\",\n            children: keyword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u627E\\u5230\\u4E86\", result.total, \"\\u6761\\u7ED3\\u679C\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this),\n        renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n          actions: [/*#__PURE__*/_jsxDEV(\"a\", {\n            children: [\"\\u4E0B\\u8F7D \", /*#__PURE__*/_jsxDEV(DownloadOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 70\n            }, this)]\n          }, \"list-loadmore-edit\", true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 39\n          }, this)],\n          children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n            style: {\n              fontSize: \"20px\"\n            },\n            avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                backgroundColor: '#fa1a1ad9'\n              },\n              shape: \"square\",\n              size: 40,\n              children: item.album.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 41\n            }, this) // src={item.album.artist.img1v1Url} \n            // https://p2.music.126.net/CcthX_ZCexIdriZADoNn3g==/109951165628166191.jpg?\n            ,\n            title: /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: e => goDetail(item.id, e),\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 40\n            }, this),\n            description: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\u6B4C\\u624B:\", item.artists.map(item => {\n                return item.name;\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: 10\n            },\n            children: [\"\\u65F6\\u957F  \", new Date(item.duration).getMinutes(), \":\", new Date(item.duration).getSeconds()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 29\n          }, this), console.log(item), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(PlayCircleOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 34\n            }, this), \"  \", /*#__PURE__*/_jsxDEV(HeartTwoTone, {\n              twoToneColor: \"#fa1a1a\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 58\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pages\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: previousPage,\n          disabled: hasPrevious(),\n          children: \"\\u4E0A\\u4E00\\u9875\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: nextPage,\n          children: \"\\u4E0B\\u4E00\\u9875\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u60F3\\u8DF3\\u8F6C\\u7684\\u9875\\u9762:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: 40\n          },\n          value: inputPageNum,\n          onChange: handleInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: submitInputPage,\n          children: \"\\u8DF3\\u8F6C\\u5230\\u6B64\\u9875\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TopJumper, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SearchResult, \"lv+8o+TJ/J5f89sLd8uxNB8JzV0=\", false, function () {\n  return [useParams];\n});\n\n_c = SearchResult;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchResult\");","map":{"version":3,"sources":["D:/vscode/react_netease_music/src/components/search/SearchResult.tsx"],"names":["React","useEffect","useState","useParams","HeartTwoTone","search","Avatar","Button","List","Menu","PlayCircleOutlined","DownloadOutlined","TopJumper","counter","SearchResult","inputPageNum","setInputPageNum","result","setResult","type","limit","page","total","songList","id","name","artists","album","artist","img1v1Url","duration","copyrightId","status","alias","rtype","ftype","mvid","fee","rUrl","mark","keyword","hasPrevious","goPage","pageNum","keywords","offset","then","response","res","data","songs","songCount","nextPage","console","log","previousPage","handleInput","e","target","value","submitInputPage","Number","goDetail","window","open","showPlayList","item","fontSize","backgroundColor","map","margin","Date","getMinutes","getSeconds","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport HeartTwoTone from '@ant-design/icons/lib/icons/HeartTwoTone';\r\nimport { search } from \"../utils/search\";\r\nimport { Avatar, Button, List, Menu, Result, Skeleton, Table } from \"antd\";\r\nimport { PlayCircleOutlined, DownloadOutlined } from \"@ant-design/icons/lib/icons\";\r\nimport TopJumper from \"../detail/TopJumper\";\r\nimport Test from \"./test\";\r\ninterface SongProps {\r\n    id: any,\r\n    name: any,\r\n    artists: any,\r\n    album: any,\r\n    duration: any,\r\n    copyrightId: any,\r\n    status: any,\r\n    alias: any,\r\n    rtype: any,\r\n    ftype: any,\r\n    mvid: any,\r\n    fee: any,\r\n    rUrl: any,\r\n    mark: any,\r\n}\r\nlet counter = 0;\r\n//第二版搜索结果\r\nexport default function SearchResult() {\r\n    const [inputPageNum, setInputPageNum] = useState('');\r\n    const [result, setResult] = useState({\r\n        // 类型\r\n        type: '1',\r\n        // 页容量\r\n        limit: 15,\r\n        // 页码\r\n        page: 1,\r\n        // 总条数\r\n        total: 0,\r\n        songList: [{\r\n            id: null,\r\n            name: null,\r\n            artists: [],\r\n            album: {\r\n                name: null,\r\n                artist: {\r\n                    img1v1Url: null\r\n                }\r\n            },\r\n            duration: '',\r\n            copyrightId: null,\r\n            status: null,\r\n            alias: null,\r\n            rtype: null,\r\n            ftype: null,\r\n            mvid: null,\r\n            fee: null,\r\n            rUrl: null,\r\n            mark: null,\r\n        }],\r\n    });\r\n    let { keyword } = useParams();\r\n    const hasPrevious = () => {\r\n        return counter === 1;\r\n    }\r\n    const goPage = (pageNum: number) => {\r\n        counter = pageNum;\r\n        search({\r\n            keywords: keyword,\r\n            limit: result.limit,\r\n            offset: (counter - 1) * result.limit,\r\n            type: result.type,\r\n        }).then((response) => {\r\n            let res = response.data;\r\n            setResult({\r\n                songList: res.result.songs,\r\n                total: res.result.songCount,\r\n                type: result.type,\r\n                limit: result.limit,\r\n                page: counter,\r\n            })\r\n        })\r\n    }\r\n    const nextPage = () => {\r\n        console.log(counter);\r\n        counter++;\r\n        goPage(counter);\r\n    }\r\n    const previousPage = () => {\r\n        console.log(counter);\r\n        counter--;\r\n        goPage(counter);\r\n    }\r\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setInputPageNum(e.target.value);\r\n    }\r\n    const submitInputPage = () => {\r\n        goPage(Number(inputPageNum));\r\n        setInputPageNum('');\r\n    }\r\n    const goDetail = (id: string | null, e: any) => {\r\n        console.log(id);\r\n        window.open(`#/detail/${id}`, '_self');\r\n    }\r\n    const showPlayList = (keyword: string | undefined, e: any) => {\r\n        window.open(`#/searchplaylist/${keyword}`, '_self');\r\n    }\r\n    useEffect(() => {\r\n        if (counter === 0) {\r\n            goPage(1);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <Menu theme='light' mode=\"horizontal\">\r\n                <Menu.Item key=\"song\">单曲</Menu.Item>\r\n                <Menu.Item key=\"singer\">歌手</Menu.Item>\r\n                <Menu.Item key=\"album\">专辑</Menu.Item>\r\n                <Menu.Item key=\"vedio\">视频</Menu.Item>\r\n                <Menu.Item key=\"songList\" onClick={(e) => showPlayList(keyword, e)}>歌单</Menu.Item>\r\n            </Menu>\r\n\r\n            <div className=\"container\">\r\n                <List\r\n                    className=\"list\"\r\n                    itemLayout=\"horizontal\"\r\n                    dataSource={result.songList}\r\n                    header={\r\n                        <div className=\"title\" >\r\n                            <span id='keyword'>{keyword}</span>\r\n                            <span>找到了{result.total}条结果</span>\r\n                        </div>\r\n                    }\r\n                    renderItem={item => (\r\n                        <List.Item\r\n                            actions={[<a key=\"list-loadmore-edit\">下载 <DownloadOutlined /></a>]}\r\n                        >\r\n                            <List.Item.Meta\r\n                                style={{ fontSize: \"20px\" }}\r\n\r\n                                avatar={<Avatar style={{ backgroundColor: '#fa1a1ad9' }} shape=\"square\" size={40}>{item.album.name}</Avatar>\r\n                                    // src={item.album.artist.img1v1Url} \r\n                                }\r\n                                // https://p2.music.126.net/CcthX_ZCexIdriZADoNn3g==/109951165628166191.jpg?\r\n                                title={<a onClick={(e) => goDetail(item.id, e)}>{item.name}</a>}\r\n                                description={\r\n                                    <div>歌手:{item.artists.map((item: { name: any; }) => {\r\n                                        return item.name;\r\n                                    })}\r\n                                    </div>}\r\n                            />\r\n                            {/* <Test sid={item.id}/> */}\r\n                            <div style={{ margin: 10 }}>时长  {new Date(item.duration).getMinutes()}:{new Date(item.duration).getSeconds()}</div>\r\n                            {console.log(item)}\r\n                            <div><PlayCircleOutlined />  <HeartTwoTone twoToneColor=\"#fa1a1a\" />\r\n                                {/* <HeartOutlined /> */}\r\n                            </div>\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n                <div className=\"pages\">\r\n                    <Button onClick={previousPage} disabled={hasPrevious()}>上一页</Button>\r\n                    <Button onClick={nextPage}>下一页</Button>\r\n                    <span>请输入您想跳转的页面:</span>\r\n                    <input style={{ width: 40 }} value={inputPageNum} onChange={handleInput} />\r\n                    <Button onClick={submitInputPage}>跳转到此页</Button>\r\n                </div>\r\n            </div>\r\n            <TopJumper />\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}