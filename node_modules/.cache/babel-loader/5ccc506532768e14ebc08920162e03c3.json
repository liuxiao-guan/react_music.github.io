{"ast":null,"code":"var _jsxFileName = \"D:\\\\vscode\\\\react_netease_music\\\\src\\\\components\\\\detail\\\\Comment.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\"; //import {search} from \"../utils/search\";\n\nimport { comment } from \"../utils/comment\";\nimport { Avatar, Button, List } from \"antd\";\nimport { Footer, LikeOutlined, CommentOutlined } from \"antd/lib/layout/layout\"; //封装歌曲结果对象\n\n/*\r\n* 不得不吐槽一下Typescript要求真多，这些参数是通过报错信息找到的，\r\n* 如果想看，可以在下面渲染的时候，在map中把value的类型去掉，并在li的渲染中直接渲染value，react会在报错信息中提示\r\n* 还不太清楚各个参数具体的类型，所以暂时都使用any\r\n* */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet counter = 0; //第二版搜索结果\n\nexport default function Comment() {\n  _s();\n\n  const [inputPageNum, setInputPageNum] = useState('');\n  const [songid, setSongid] = useState('');\n  const [result, setResult] = useState({\n    // 类型\n    //type: '1',\n    // 页容量\n    limit: 15,\n    // 页码\n    page: 1,\n    // 总条数\n    total: 0,\n    commentlist: [{\n      user: {\n        nickname: '',\n        avatarUrl: ''\n      },\n      beReplied: null,\n      artists: [],\n      pendantData: null,\n      showFloorComment: null,\n      status: null,\n      commentId: null,\n      content: null,\n      contentResource: null,\n      time: '',\n      timeStr: null,\n      needDisplayTime: null,\n      expressionUrl: null,\n      commentLocationType: null,\n      parentCommentId: null,\n      decoration: null,\n      repliedMark: null,\n      liked: null,\n      likedCount: null\n    }],\n    hotcommentlist: [{\n      user: {\n        nickname: '',\n        avatarUrl: ''\n      },\n      beReplied: null,\n      artists: [],\n      pendantData: null,\n      showFloorComment: null,\n      status: null,\n      commentId: null,\n      content: null,\n      contentResource: null,\n      time: '',\n      timeStr: null,\n      needDisplayTime: null,\n      expressionUrl: null,\n      commentLocationType: null,\n      parentCommentId: null,\n      decoration: null,\n      repliedMark: null,\n      liked: null,\n      likedCount: null\n    }]\n  });\n  let {\n    id\n  } = useParams();\n  let vid = id;\n\n  const hasPrevious = () => {\n    return counter === 1;\n  };\n\n  const goPage = pageNum => {\n    counter = pageNum;\n    comment({\n      id: vid,\n      limit: result.limit,\n      offset: (counter - 1) * result.limit //before:\n\n    }).then(response => {\n      let res = response.data;\n\n      if (counter > 1) {\n        setResult({\n          hotcommentlist: result.hotcommentlist,\n          commentlist: res.comments,\n          total: res.total,\n          //type: result.type,\n          limit: result.limit,\n          page: counter\n        });\n      } else {\n        setResult({\n          hotcommentlist: res.hotComments,\n          commentlist: res.comments,\n          total: res.total,\n          //type: result.type,\n          limit: result.limit,\n          page: counter\n        });\n      }\n    });\n  };\n\n  const nextPage = () => {\n    console.log(counter);\n    console.log(vid);\n    counter++;\n    goPage(counter);\n  };\n\n  const previousPage = () => {\n    console.log(counter);\n    counter--;\n    goPage(counter);\n  };\n\n  const handleInput = e => {\n    setInputPageNum(e.target.value);\n  };\n\n  const submitInputPage = () => {\n    goPage(Number(inputPageNum));\n    setInputPageNum('');\n  };\n\n  const goDetail = (id, e) => {\n    console.log(id); //window.open(`#/detail/${e}`, '_self')\n\n    window.open(`#/detail/${id}`, '_self'); //window.open(`#/search/${e.target.value}`, '_self')\n  };\n\n  useEffect(() => {\n    if (counter === 0) {\n      goPage(1);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: \"20px\",\n          margin: \"0% 2% 0 10%\"\n        },\n        children: \"\\u8BC4\\u8BBA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          margin: \"0px 0 0 0px\"\n        },\n        children: [\"\\u627E\\u5230\\u4E86\", result.total, \"\\u6761\\u7ED3\\u679C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 79\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \" 2px solid rgb(219, 24, 17)\",\n        margin: \"0% 10% 0 10%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"5% 10% 0 10%\"\n      },\n      children: \"\\u7CBE\\u5F69\\u8BC4\\u8BBA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \" 1px solid #000\",\n        margin: \"0 10% 0 10%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      style: {\n        margin: \"0% 10% 0 10%\"\n      },\n      className: \"result-list\",\n      itemLayout: \"vertical\" // dataSource={data}\n      // dataSource={result.commentlist}\n      ,\n      dataSource: result.hotcommentlist,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        actions: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u70B9\\u8D5E\\u6570:\", item.likedCount, \" \", /*#__PURE__*/_jsxDEV(LikeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 52\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u56DE\\u590D: \", /*#__PURE__*/_jsxDEV(CommentOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 25\n        }, this)],\n        children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n            size: \"large\",\n            src: item.user.avatarUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 37\n          }, this),\n          description: item.timeStr,\n          title: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.user.nickname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }, this), item.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"2% 10% 0 10%\"\n      },\n      children: \"\\u6700\\u65B0\\u8BC4\\u8BBA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \" 1px solid #000\",\n        margin: \"0 10% 0 10%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      itemLayout: \"vertical\",\n      style: {\n        margin: \"0 10% 0 10%\"\n      },\n      className: \"result-list\" // dataSource={data}\n      ,\n      dataSource: result.commentlist //dataSource={result.hotcommentlist}\n      ,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        actions: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u70B9\\u8D5E\\u6570:\", item.likedCount, \" \", /*#__PURE__*/_jsxDEV(LikeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 52\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\u56DE\\u590D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 25\n        }, this)],\n        children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n            size: \"large\",\n            src: item.user.avatarUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 37\n          }, this),\n          description: item.timeStr,\n          title: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.user.nickname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }, this), item.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pages\",\n        style: {\n          margin: \"0 10% 0 10%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: previousPage,\n          disabled: hasPrevious(),\n          children: \"\\u4E0A\\u4E00\\u9875\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: nextPage,\n          children: \"\\u4E0B\\u4E00\\u9875\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }, this), \"\\u8BF7\\u8F93\\u5165\\u60A8\\u60F3\\u8DF3\\u8F6C\\u7684\\u9875\\u9762:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: inputPageNum,\n          onChange: handleInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 28\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: submitInputPage,\n          children: \"\\u8DF3\\u8F6C\\u5230\\u6B64\\u9875\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Comment, \"Aya7YQTk/0Y9CNtuZi0o0TpIZ2g=\", false, function () {\n  return [useParams];\n});\n\n_c = Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["D:/vscode/react_netease_music/src/components/detail/Comment.tsx"],"names":["React","useEffect","useState","useParams","comment","Avatar","Button","List","Footer","LikeOutlined","CommentOutlined","counter","Comment","inputPageNum","setInputPageNum","songid","setSongid","result","setResult","limit","page","total","commentlist","user","nickname","avatarUrl","beReplied","artists","pendantData","showFloorComment","status","commentId","content","contentResource","time","timeStr","needDisplayTime","expressionUrl","commentLocationType","parentCommentId","decoration","repliedMark","liked","likedCount","hotcommentlist","id","vid","hasPrevious","goPage","pageNum","offset","then","response","res","data","comments","hotComments","nextPage","console","log","previousPage","handleInput","e","target","value","submitInputPage","Number","goDetail","window","open","fontSize","margin","border","item"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\n//import {search} from \"../utils/search\";\r\nimport { comment } from \"../utils/comment\";\r\nimport { Avatar, Button, List } from \"antd\";\r\nimport { VerticalAlignTopOutlined, HeartOutlined } from '@ant-design/icons'\r\nimport moment from 'moment';\r\nimport Item from \"antd/lib/list/Item\";\r\nimport { Footer,LikeOutlined,CommentOutlined} from \"antd/lib/layout/layout\";\r\n\r\n//封装歌曲结果对象\r\n/*\r\n* 不得不吐槽一下Typescript要求真多，这些参数是通过报错信息找到的，\r\n* 如果想看，可以在下面渲染的时候，在map中把value的类型去掉，并在li的渲染中直接渲染value，react会在报错信息中提示\r\n* 还不太清楚各个参数具体的类型，所以暂时都使用any\r\n* */\r\ninterface CommentProps {\r\n    user: any,\r\n    beReplied: any,\r\n    artists: any,\r\n    pendantData: any,\r\n    showFloorComment: any,\r\n    status: any,\r\n    commentId: any,\r\n    content: any,\r\n    contentResource: any,\r\n    time: any,\r\n    timeStr: any,\r\n    needDisplayTime: any,\r\n    expressionUrl: any,\r\n    commentLocationType: any,\r\n    parentCommentId: any,\r\n    decoration: any,\r\n    repliedMark: any,\r\n    liked: any,\r\n    likedCount:any,\r\n}\r\nlet counter = 0;\r\n//第二版搜索结果\r\nexport default function Comment() {\r\n    const [inputPageNum, setInputPageNum] = useState('');\r\n    const [songid, setSongid] = useState('');\r\n    const [result, setResult] = useState({\r\n        // 类型\r\n        //type: '1',\r\n        // 页容量\r\n        limit: 15,\r\n        // 页码\r\n        page: 1,\r\n        // 总条数\r\n        total: 0,\r\n\r\n        commentlist: [{\r\n            user: {\r\n                nickname: '',\r\n                avatarUrl:'',\r\n            },\r\n            beReplied: null,\r\n            artists: [],\r\n            pendantData: null,\r\n            showFloorComment: null,\r\n            status: null,\r\n            commentId: null,\r\n            content: null,\r\n            contentResource: null,\r\n            time: '',\r\n            timeStr: null,\r\n            needDisplayTime: null,\r\n            expressionUrl: null,\r\n            commentLocationType: null,\r\n            parentCommentId: null,\r\n            decoration: null,\r\n            repliedMark: null,\r\n            liked: null,\r\n            likedCount:null,\r\n        }],\r\n        hotcommentlist: [{\r\n            user: {\r\n                nickname: '',\r\n                avatarUrl:'',\r\n            },\r\n            beReplied: null,\r\n            artists: [],\r\n            pendantData: null,\r\n            showFloorComment: null,\r\n            status: null,\r\n            commentId: null,\r\n            content: null,\r\n            contentResource: null,\r\n            time: '',\r\n            timeStr: null,\r\n            needDisplayTime: null,\r\n            expressionUrl: null,\r\n            commentLocationType: null,\r\n            parentCommentId: null,\r\n            decoration: null,\r\n            repliedMark: null,\r\n            liked: null,\r\n            likedCount:null,\r\n        }],\r\n\r\n    });\r\n    let { id } = useParams();\r\n    let vid = id;\r\n\r\n    const hasPrevious = () => {\r\n        return counter === 1;\r\n    }\r\n    const goPage = (pageNum: number) => {\r\n        counter = pageNum;\r\n        comment({\r\n            id: vid,\r\n            limit: result.limit,\r\n            offset: (counter - 1) * result.limit,\r\n            //before:\r\n        }).then((response) => {\r\n            let res = response.data;\r\n            if(counter > 1){\r\n                setResult({\r\n                    hotcommentlist:result.hotcommentlist,\r\n                    commentlist: res.comments,\r\n                    total: res.total,\r\n                    //type: result.type,\r\n                    limit: result.limit,\r\n                    page: counter,\r\n                })\r\n            }else{\r\n                setResult({\r\n                    hotcommentlist:res.hotComments,\r\n                    commentlist: res.comments,\r\n                    total: res.total,\r\n                    //type: result.type,\r\n                    limit: result.limit,\r\n                    page: counter,\r\n                })\r\n            }\r\n           \r\n        })\r\n    }\r\n    const nextPage = () => {\r\n        console.log(counter);\r\n        console.log(vid);\r\n\r\n        counter++;\r\n        goPage(counter);\r\n    }\r\n    const previousPage = () => {\r\n        console.log(counter);\r\n        counter--;\r\n        goPage(counter);\r\n    }\r\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setInputPageNum(e.target.value);\r\n    }\r\n    const submitInputPage = () => {\r\n        goPage(Number(inputPageNum));\r\n        setInputPageNum('');\r\n    }\r\n    const goDetail = (id: string, e: any) => {\r\n        console.log(id);\r\n        //window.open(`#/detail/${e}`, '_self')\r\n        window.open(`#/detail/${id}`, '_self')\r\n        //window.open(`#/search/${e.target.value}`, '_self')\r\n\r\n\r\n    }\r\n    useEffect(() => {\r\n        if (counter === 0) {\r\n            goPage(1);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n\r\n            <div>\r\n                <span style={{fontSize:\"20px\",margin:\"0% 2% 0 10%\"}}>评论</span><span style={{ margin: \"0px 0 0 0px\" }}>找到了{result.total}条结果</span>\r\n            </div>\r\n            <div style={{border:\" 2px solid rgb(219, 24, 17)\",margin:\"0% 10% 0 10%\"}}></div> \r\n            <div style={{margin:\"5% 10% 0 10%\"}}>精彩评论</div>\r\n            <div style={{border:\" 1px solid #000\",margin:\"0 10% 0 10%\"}}></div> \r\n            <List\r\n            style={{margin:\"0% 10% 0 10%\"}}\r\n                className=\"result-list\"\r\n                itemLayout=\"vertical\"\r\n                // dataSource={data}\r\n                // dataSource={result.commentlist}\r\n                dataSource={result.hotcommentlist}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                    actions={[\r\n                        <div>点赞数:{item.likedCount} <LikeOutlined /></div>,\r\n\r\n                        <div>回复: <CommentOutlined /></div>,\r\n                      ]}>\r\n                                          \r\n                        <List.Item.Meta\r\n                            avatar={<Avatar size=\"large\" src={item.user.avatarUrl}/>}\r\n                            description={item.timeStr}\r\n                            title={<p>{item.user.nickname}</p>}\r\n                        />\r\n                        {item.content}                        \r\n                        \r\n                    </List.Item>\r\n                )}\r\n            />\r\n            <div style={{margin:\"2% 10% 0 10%\"}} >最新评论</div>\r\n            <div style={{border:\" 1px solid #000\",margin:\"0 10% 0 10%\"}}></div> \r\n            <List\r\n                itemLayout=\"vertical\"\r\n                style={{margin:\"0 10% 0 10%\"}}\r\n                className=\"result-list\"                \r\n                // dataSource={data}\r\n                dataSource={result.commentlist}\r\n                //dataSource={result.hotcommentlist}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                    actions={[\r\n                        <div>点赞数:{item.likedCount} <LikeOutlined /></div>,\r\n\r\n                        <div>回复</div>,\r\n                      ]}>\r\n                                          \r\n                        <List.Item.Meta\r\n                            avatar={<Avatar size=\"large\" src={item.user.avatarUrl}/>}\r\n                            description={item.timeStr}\r\n                            title={<p>{item.user.nickname}</p>}\r\n                        />\r\n                        {item.content}                        \r\n                        \r\n                    </List.Item>\r\n                )}\r\n            />\r\n            \r\n            <Footer>\r\n            <div className=\"pages\" style={{margin:\"0 10% 0 10%\"}}>\r\n                <Button onClick={previousPage} disabled={hasPrevious()}>上一页</Button>\r\n               \r\n                <Button onClick={nextPage}>下一页</Button>\r\n                请输入您想跳转的页面:<input value={inputPageNum} onChange={handleInput} />\r\n                <Button onClick={submitInputPage}>跳转到此页</Button>\r\n            </div>\r\n            </Footer>\r\n\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}