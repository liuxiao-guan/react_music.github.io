{"ast":null,"code":"import _slicedToArray from\"D:/vscode/react_netease_music/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import HeartTwoTone from'@ant-design/icons/lib/icons/HeartTwoTone';import{search}from\"../utils/search\";import{Avatar,Button,List,Menu}from\"antd\";import{PlayCircleOutlined,DownloadOutlined}from\"@ant-design/icons/lib/icons\";import TopJumper from\"../detail/TopJumper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var counter=0;//第二版搜索结果\nexport default function SearchResult(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inputPageNum=_useState2[0],setInputPageNum=_useState2[1];var _useState3=useState({// 类型\ntype:'1',// 页容量\nlimit:15,// 页码\npage:1,// 总条数\ntotal:0,songList:[{id:null,name:null,artists:[],album:{name:null,artist:{img1v1Url:null}},duration:'',copyrightId:null,status:null,alias:null,rtype:null,ftype:null,mvid:null,fee:null,rUrl:null,mark:null}]}),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useParams=useParams(),keyword=_useParams.keyword;var hasPrevious=function hasPrevious(){return counter===1;};var goPage=function goPage(pageNum){counter=pageNum;search({keywords:keyword,limit:result.limit,offset:(counter-1)*result.limit,type:result.type}).then(function(response){var res=response.data;setResult({songList:res.result.songs,total:res.result.songCount,type:result.type,limit:result.limit,page:counter});});};var nextPage=function nextPage(){console.log(counter);counter++;goPage(counter);};var previousPage=function previousPage(){console.log(counter);counter--;goPage(counter);};var handleInput=function handleInput(e){setInputPageNum(e.target.value);};var submitInputPage=function submitInputPage(){goPage(Number(inputPageNum));setInputPageNum('');};var goDetail=function goDetail(id,e){console.log(id);window.open(\"#/detail/\".concat(id),'_self');};var showPlayList=function showPlayList(keyword,e){window.open(\"#/searchplaylist/\".concat(keyword),'_self');};useEffect(function(){if(counter===0){goPage(1);}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Menu,{theme:\"light\",mode:\"horizontal\",children:[/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u5355\\u66F2\"},\"song\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u6B4C\\u624B\"},\"singer\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u4E13\\u8F91\"},\"album\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u89C6\\u9891\"},\"vedio\"),/*#__PURE__*/_jsx(Menu.Item,{onClick:function onClick(e){return showPlayList(keyword,e);},children:\"\\u6B4C\\u5355\"},\"songList\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(List,{className:\"list\",itemLayout:\"horizontal\",dataSource:result.songList,header:/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsx(\"span\",{id:\"keyword\",children:keyword}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u627E\\u5230\\u4E86\",result.total,\"\\u6761\\u7ED3\\u679C\"]})]}),renderItem:function renderItem(item){return/*#__PURE__*/_jsxs(List.Item,{actions:[/*#__PURE__*/_jsxs(\"a\",{children:[\"\\u4E0B\\u8F7D \",/*#__PURE__*/_jsx(DownloadOutlined,{})]},\"list-loadmore-edit\")],children:[/*#__PURE__*/_jsx(List.Item.Meta,{style:{fontSize:\"20px\"},avatar:/*#__PURE__*/_jsx(Avatar,{style:{backgroundColor:'#fa1a1ad9'},shape:\"square\",size:40,children:item.album.name})// src={item.album.artist.img1v1Url} \n// https://p2.music.126.net/CcthX_ZCexIdriZADoNn3g==/109951165628166191.jpg?\n,title:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(e){return goDetail(item.id,e);},children:item.name}),description:/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u6B4C\\u624B:\",item.artists.map(function(item){return item.name;})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:10},children:[\"\\u65F6\\u957F  \",new Date(item.duration).getMinutes(),\":\",new Date(item.duration).getSeconds()]}),console.log(item),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PlayCircleOutlined,{}),\"  \",/*#__PURE__*/_jsx(HeartTwoTone,{twoToneColor:\"#fa1a1a\"})]})]});}}),/*#__PURE__*/_jsxs(\"div\",{className:\"pages\",children:[/*#__PURE__*/_jsx(Button,{onClick:previousPage,disabled:hasPrevious(),children:\"\\u4E0A\\u4E00\\u9875\"}),/*#__PURE__*/_jsx(Button,{onClick:nextPage,children:\"\\u4E0B\\u4E00\\u9875\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u8BF7\\u8F93\\u5165\\u60A8\\u60F3\\u8DF3\\u8F6C\\u7684\\u9875\\u9762:\"}),/*#__PURE__*/_jsx(\"input\",{style:{width:40},value:inputPageNum,onChange:handleInput}),/*#__PURE__*/_jsx(Button,{onClick:submitInputPage,children:\"\\u8DF3\\u8F6C\\u5230\\u6B64\\u9875\"})]})]}),/*#__PURE__*/_jsx(TopJumper,{})]});}","map":{"version":3,"sources":["D:/vscode/react_netease_music/src/components/search/SearchResult.tsx"],"names":["React","useEffect","useState","useParams","HeartTwoTone","search","Avatar","Button","List","Menu","PlayCircleOutlined","DownloadOutlined","TopJumper","counter","SearchResult","inputPageNum","setInputPageNum","type","limit","page","total","songList","id","name","artists","album","artist","img1v1Url","duration","copyrightId","status","alias","rtype","ftype","mvid","fee","rUrl","mark","result","setResult","keyword","hasPrevious","goPage","pageNum","keywords","offset","then","response","res","data","songs","songCount","nextPage","console","log","previousPage","handleInput","e","target","value","submitInputPage","Number","goDetail","window","open","showPlayList","item","fontSize","backgroundColor","map","margin","Date","getMinutes","getSeconds","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport HeartTwoTone from '@ant-design/icons/lib/icons/HeartTwoTone';\r\nimport { search } from \"../utils/search\";\r\nimport { Avatar, Button, List, Menu, Result, Skeleton, Table } from \"antd\";\r\nimport { PlayCircleOutlined, DownloadOutlined } from \"@ant-design/icons/lib/icons\";\r\nimport TopJumper from \"../detail/TopJumper\";\r\nimport Test from \"./test\";\r\ninterface SongProps {\r\n    id: any,\r\n    name: any,\r\n    artists: any,\r\n    album: any,\r\n    duration: any,\r\n    copyrightId: any,\r\n    status: any,\r\n    alias: any,\r\n    rtype: any,\r\n    ftype: any,\r\n    mvid: any,\r\n    fee: any,\r\n    rUrl: any,\r\n    mark: any,\r\n}\r\nlet counter = 0;\r\n//第二版搜索结果\r\nexport default function SearchResult() {\r\n    const [inputPageNum, setInputPageNum] = useState('');\r\n    const [result, setResult] = useState({\r\n        // 类型\r\n        type: '1',\r\n        // 页容量\r\n        limit: 15,\r\n        // 页码\r\n        page: 1,\r\n        // 总条数\r\n        total: 0,\r\n        songList: [{\r\n            id: null,\r\n            name: null,\r\n            artists: [],\r\n            album: {\r\n                name: null,\r\n                artist: {\r\n                    img1v1Url: null\r\n                }\r\n            },\r\n            duration: '',\r\n            copyrightId: null,\r\n            status: null,\r\n            alias: null,\r\n            rtype: null,\r\n            ftype: null,\r\n            mvid: null,\r\n            fee: null,\r\n            rUrl: null,\r\n            mark: null,\r\n        }],\r\n    });\r\n    let { keyword } = useParams();\r\n    const hasPrevious = () => {\r\n        return counter === 1;\r\n    }\r\n    const goPage = (pageNum: number) => {\r\n        counter = pageNum;\r\n        search({\r\n            keywords: keyword,\r\n            limit: result.limit,\r\n            offset: (counter - 1) * result.limit,\r\n            type: result.type,\r\n        }).then((response) => {\r\n            let res = response.data;\r\n            setResult({\r\n                songList: res.result.songs,\r\n                total: res.result.songCount,\r\n                type: result.type,\r\n                limit: result.limit,\r\n                page: counter,\r\n            })\r\n        })\r\n    }\r\n    const nextPage = () => {\r\n        console.log(counter);\r\n        counter++;\r\n        goPage(counter);\r\n    }\r\n    const previousPage = () => {\r\n        console.log(counter);\r\n        counter--;\r\n        goPage(counter);\r\n    }\r\n    const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setInputPageNum(e.target.value);\r\n    }\r\n    const submitInputPage = () => {\r\n        goPage(Number(inputPageNum));\r\n        setInputPageNum('');\r\n    }\r\n    const goDetail = (id: string | null, e: any) => {\r\n        console.log(id);\r\n        window.open(`#/detail/${id}`, '_self');\r\n    }\r\n    const showPlayList = (keyword: string | undefined, e: any) => {\r\n        window.open(`#/searchplaylist/${keyword}`, '_self');\r\n    }\r\n    useEffect(() => {\r\n        if (counter === 0) {\r\n            goPage(1);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <Menu theme='light' mode=\"horizontal\">\r\n                <Menu.Item key=\"song\">单曲</Menu.Item>\r\n                <Menu.Item key=\"singer\">歌手</Menu.Item>\r\n                <Menu.Item key=\"album\">专辑</Menu.Item>\r\n                <Menu.Item key=\"vedio\">视频</Menu.Item>\r\n                <Menu.Item key=\"songList\" onClick={(e) => showPlayList(keyword, e)}>歌单</Menu.Item>\r\n            </Menu>\r\n\r\n            <div className=\"container\">\r\n                <List\r\n                    className=\"list\"\r\n                    itemLayout=\"horizontal\"\r\n                    dataSource={result.songList}\r\n                    header={\r\n                        <div className=\"title\" >\r\n                            <span id='keyword'>{keyword}</span>\r\n                            <span>找到了{result.total}条结果</span>\r\n                        </div>\r\n                    }\r\n                    renderItem={item => (\r\n                        <List.Item\r\n                            actions={[<a key=\"list-loadmore-edit\">下载 <DownloadOutlined /></a>]}\r\n                        >\r\n                            <List.Item.Meta\r\n                                style={{ fontSize: \"20px\" }}\r\n\r\n                                avatar={<Avatar style={{ backgroundColor: '#fa1a1ad9' }} shape=\"square\" size={40}>{item.album.name}</Avatar>\r\n                                    // src={item.album.artist.img1v1Url} \r\n                                }\r\n                                // https://p2.music.126.net/CcthX_ZCexIdriZADoNn3g==/109951165628166191.jpg?\r\n                                title={<a onClick={(e) => goDetail(item.id, e)}>{item.name}</a>}\r\n                                description={\r\n                                    <div>歌手:{item.artists.map((item: { name: any; }) => {\r\n                                        return item.name;\r\n                                    })}\r\n                                    </div>}\r\n                            />\r\n                            {/* <Test sid={item.id}/> */}\r\n                            <div style={{ margin: 10 }}>时长  {new Date(item.duration).getMinutes()}:{new Date(item.duration).getSeconds()}</div>\r\n                            {console.log(item)}\r\n                            <div><PlayCircleOutlined />  <HeartTwoTone twoToneColor=\"#fa1a1a\" />\r\n                                {/* <HeartOutlined /> */}\r\n                            </div>\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n                <div className=\"pages\">\r\n                    <Button onClick={previousPage} disabled={hasPrevious()}>上一页</Button>\r\n                    <Button onClick={nextPage}>下一页</Button>\r\n                    <span>请输入您想跳转的页面:</span>\r\n                    <input style={{ width: 40 }} value={inputPageNum} onChange={handleInput} />\r\n                    <Button onClick={submitInputPage}>跳转到此页</Button>\r\n                </div>\r\n            </div>\r\n            <TopJumper />\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}